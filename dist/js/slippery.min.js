!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Slippery=e()}(this,function(){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t}).apply(this,arguments)}var t,e,r={init:!0,nav:!0,dots:!0,loop:!1,items:1,destroy:!1,centered:!1,swipes:!0,adaptiveHeight:!1,appendDots:!1,appendNav:!1,margins:30,activeSlide:0,classNames:{slider:{wrapper:"slippery__wrapper",item:"slippery__item",active:"slippery__item--active",prev:"slippery__item--prev"},nav:{block:"slippery__nav",item:"slippery__nav-button",prev:"slippery__nav-button--prev",next:"slippery__nav-button--next",disabled:"slippery__nav-button--disabled"},dots:{block:"slippery__dots",item:"slippery__dots-item",active:"slippery__dots-item--active"}},transition:{type:"linear",delay:0,duration:750},callbacks:{dotContent:function(){},navContent:function(t,e){t.innerText="‹",e.innerText="›"},beforeMove:function(){},afterMove:function(){},onResize:function(){},onSwipe:function(){},beforeInit:function(){},afterInit:function(){}}},s={initNav:function(){return this.nav={block:document.createElement("div"),prev:document.createElement("button"),next:document.createElement("button")},this.nav.block.classList.add(this.opts.classNames.nav.block),this.nav.prev.classList.add(this.opts.classNames.nav.item),this.nav.prev.classList.add(this.opts.classNames.nav.prev),this.nav.next.classList.add(this.opts.classNames.nav.item),this.nav.next.classList.add(this.opts.classNames.nav.next),this.opts.callbacks.navContent(this.nav.prev,this.nav.next),this.nav.prev.addEventListener("click",this.navHandler),this.nav.next.addEventListener("click",this.navHandler),this.nav.block.appendChild(this.nav.prev),this.nav.block.appendChild(this.nav.next),this.opts.appendNav?this.opts.appendNav.appendChild(this.nav.block):this.block.insertBefore(this.nav.block,this.wrapper),this.componentPush("nav"),this},updateNav:function(){return this.opts.loop||(0===this.activeSlide?this.nav.prev.classList.add(this.opts.classNames.nav.disabled):this.nav.prev.classList.remove(this.opts.classNames.nav.disabled),this.activeSlide===this.slidesLength?this.nav.next.classList.add(this.opts.classNames.nav.disabled):this.nav.next.classList.remove(this.opts.classNames.nav.disabled)),this},navHandler:function(t){var e=t.currentTarget;e===this.nav.prev&&this.moveTo(this.activeSlide-1),e===this.nav.next&&this.moveTo(this.activeSlide+1)},destroyNav:function(){return this.isComponentInit("nav")&&(this.nav.block.remove(),this.componentPop("nav")),this}},i={initDots:function(){var s=this;this.dots={block:document.createElement("ul"),items:null},this.dots.block.classList.add(this.opts.classNames.dots.block);for(var t=0;t<this.slidesLength+1;t+=1){var e=document.createElement("li");e.classList.add(this.opts.classNames.dots.item),e.addEventListener("click",this.dotsHandler),this.dots.block.appendChild(e)}return this.opts.appendDots?this.opts.appendDots.appendChild(this.dots.block):this.block.appendChild(this.dots.block),this.dots.items=this.dots.block.querySelectorAll(this.selectors.dots.item),this.dots.items.forEach(function(t,e){s.opts.callbacks.dotContent(t,e)}),this.componentPush("dots"),this},destroyDots:function(){return this.isComponentInit("dots")&&(this.dots.block.remove(),this.componentPop("dots")),this},dotsHandler:function(e){if(!e.currentTarget.classList.contains(this.opts.classNames.dots.active)){var t=[].findIndex.call(this.dots.items,function(t){return t===e.currentTarget});this.dots.items[this.activeSlide].classList.remove(this.opts.classNames.dots.active),e.currentTarget.classList.add(this.opts.classNames.dots.active),this.moveTo(t)}},updateDots:function(){var e=this;return this.dots.items.forEach(function(t){t.classList.contains(e.opts.classNames.dots.active)&&t.classList.remove(e.opts.classNames.dots.active)}),this.dots.items[this.activeSlide].classList.add(this.opts.classNames.dots.active),this}},h={initAutoplay:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.opts.autoplay.delay;return this.autoplay={interval:setInterval(function(){if(t.activeSlide===t.slidesLength&&!t.opts.loop)return t.destroyAutoplay(),t.opts.nav&&t.updateNav(),void(t.opts.dots&&t.updateDots());t.moveTo(t.activeSlide+1)},e),stop:!1},this.block.addEventListener("mouseenter",this.hoverInHandler),this.block.addEventListener("mouseleave",this.hoverOutHandler),this.componentPush("autoplay"),this},destroyAutoplay:function(){return-1<this.isComponentInit("autoplay")&&(clearInterval(this.autoplay.interval),this.componentPop("autoplay")),this.block.removeEventListener("mouseenter",this.hoverInHandler),this.block.removeEventListener("mouseleave",this.hoverOutHandler),this},hoverInHandler:function(){this.opts.autoplay.stopOnHover&&(this.autoplay.stop=!0,clearInterval(this.autoplay.interval))},hoverOutHandler:function(){this.opts.autoplay.stopOnHover&&(this.autoplay.stop=!1,this.initAutoplay())}},l={initSwipes:function(){return this.wrapper.addEventListener("mousedown",this.touchstartHandler),this.wrapper.addEventListener("mousemove",this.touchmoveHandler),this.block.addEventListener("mouseup",this.touchendHandler),this.wrapper.addEventListener("touchstart",this.touchstartHandler),this.wrapper.addEventListener("touchmove",this.touchmoveHandler),this.block.addEventListener("touchend",this.touchendHandler),this.componentPush("swipes"),this},destroySwipes:function(){return this.isComponentInit("swipes")&&(this.wrapper.removeEventListener("mousedown",this.touchstartHandler),this.wrapper.removeEventListener("mousemove",this.touchmoveHandler),this.block.removeEventListener("mouseup",this.touchendHandler),this.wrapper.removeEventListener("touchstart",this.touchstartHandler),this.wrapper.removeEventListener("touchmove",this.touchmoveHandler),this.block.removeEventListener("touchend",this.touchendHandler),this.componentPop("swipes")),this},touchstartHandler:function(t){t.preventDefault(),this.swipe={translate:null,x:0,prevX:0,start:null,diff:null},this.wrapper.style.cursor="grab"},touchmoveHandler:function(t){var e,s=this;switch(t.preventDefault(),1===t.buttons&&(void 0!==t.movementX?(1===Math.sign(t.movementX)&&(e="right"),-1===Math.sign(t.movementX)&&(e="left")):(null===this.swipe.start&&(this.swipe.start=t.clientX),this.swipe.prev=t.clientX,null===this.swipe.diff?this.swipe.diff=this.swipe.start-t.clientX:this.swipe.diff=this.swipe.prev-this.swipe.start,1===Math.sign(this.swipe.diff)&&(e="right"),-1===Math.sign(this.swipe.diff)&&(e="left")),this.swipe.translate=parseInt(this.wrapper.style.transform.match(/[\d -]+/g).join(""),10)),t.touches&&(this.isComponentInit("autoplay")&&this.opts.autoplay.stopOnHover&&this.destroyAutoplay(),null===this.swipe.start&&(this.swipe.start=t.touches[0].clientX),this.swipe.prev=t.touches[0].clientX,null===this.swipe.diff?this.swipe.diff=this.swipe.start-t.touches[0].clientX:this.swipe.diff=this.swipe.prev-this.swipe.start,1===Math.sign(this.swipe.diff)&&(e="right"),-1===Math.sign(this.swipe.diff)&&(e="left")),e){case"left":1===t.buttons&&(t.movementX?(this.wrapper.style.transition="none",this.swipe.translate-=Math.abs(t.movementX),this.wrapper.style.transform="translateX(".concat(this.swipe.translate,"px)")):(this.opts.callbacks.onSwipe(this.activeSlide,this.activeSlide+1,"ltr","ieSwipe"),this.moveTo(this.activeSlide+1),this.wrapper.removeEventListener("mousemove",this.touchmoveHandler),setTimeout(function(){s.wrapper.addEventListener("mousemove",s.touchmoveHandler)},700))),t.touches&&(this.opts.callbacks.onSwipe(this.activeSlide,this.activeSlide+1,"ltr","touchSwipe"),this.moveTo(this.activeSlide+1),this.wrapper.removeEventListener("touchmove",this.touchmoveHandler),setTimeout(function(){s.wrapper.addEventListener("touchmove",s.touchmoveHandler)},500));break;case"right":1===t.buttons&&(t.movementX?(this.wrapper.style.transition="none",this.swipe.translate+=Math.abs(t.movementX),this.wrapper.style.transform="translateX(".concat(this.swipe.translate,"px)")):(this.opts.callbacks.onSwipe(this.activeSlide,this.activeSlide+1,"rtl","ieSwipe"),this.moveTo(this.activeSlide-1),this.wrapper.removeEventListener("mousemove",this.touchmoveHandler),setTimeout(function(){s.wrapper.addEventListener("mousemove",s.touchmoveHandler)},700))),t.touches&&(this.opts.callbacks.onSwipe(this.activeSlide,this.activeSlide-1,"rtl","touchSwipe"),this.moveTo(this.activeSlide-1),this.wrapper.removeEventListener("touchmove",this.touchmoveHandler),setTimeout(function(){s.wrapper.addEventListener("touchmove",s.touchmoveHandler)},500))}},touchendHandler:function(t){if(this.wrapper.style.cursor="default","mouseup"===t.type&&t.preventDefault(),t.touches)this.opts.autoplay&&!this.isComponentInit("autoplay")&&this.opts.autoplay.stopOnHover&&this.initAutoplay();else if(void 0!==t.movementX&&this.swipe&&this.swipe.translate){var e=this.slides[0].clientWidth;if(this.opts.items&&(e*=this.opts.items),this.swipe.translate>-(e*this.activeSlide-e/5)){if(!this.opts.loop&&0===this.activeSlide)return this.moveTo(this.activeSlide),void this.opts.callbacks.onSwipe(this.activeSlide,this.activeSlide,"same","mouseSwipe");this.opts.callbacks.onSwipe(this.activeSlide,this.activeSlide-1,"rtl","mouseSwipe"),this.moveTo(this.activeSlide-1)}else if(this.swipe.translate<-(e*this.activeSlide+e/5)){if(!this.opts.loop&&this.activeSlide===this.slidesLength)return this.moveTo(this.activeSlide),void this.opts.callbacks.onSwipe(this.activeSlide,this.activeSlide,"same","mouseSwipe");this.opts.callbacks.onSwipe(this.activeSlide,this.activeSlide+1,"ltr","mouseSwipe"),this.moveTo(this.activeSlide+1)}else this.opts.callbacks.onSwipe(this.activeSlide,this.activeSlide,"same","mouseSwipe"),this.moveTo(this.activeSlide);this.swipe.translate=null}}};Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(t,e){if(null==t)throw new TypeError("Cannot convert first argument to object");for(var s=Object(t),i=1;i<arguments.length;i++){var o=arguments[i];if(null!=o)for(var n=Object.keys(Object(o)),a=0,r=n.length;a<r;a++){var h=n[a],l=Object.getOwnPropertyDescriptor(o,h);void 0!==l&&l.enumerable&&(s[h]=o[h])}}return s}}),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(t,e){e=e||window;for(var s=0;s<this.length;s++)t.call(e,this[s],s,this)}),t=[window.Element,window.CharacterData,window.DocumentType],e=[],t.forEach(function(t){t&&e.push(t.prototype)}),e.forEach(function(t){t.hasOwnProperty("remove")||Object.defineProperty(t,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})}),Math.sign=Math.sign||function(t){return 0===(t=+t)||isNaN(t)?t:0<t?1:-1},Array.prototype.findIndex||(Array.prototype.findIndex=function(t){if(null==this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,s=Object(this),i=s.length>>>0,o=arguments[1],n=0;n<i;n++)if(e=s[n],t.call(o,e,n,s))return n;return-1}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');var s=Object(this),i=s.length>>>0;if(0===i)return!1;var o,n,a=0|e,r=Math.max(0<=a?a:i-Math.abs(a),0);for(;r<i;){if((o=s[r])===(n=t)||"number"==typeof o&&"number"==typeof n&&isNaN(o)&&isNaN(n))return!0;r++}return!1}});var p={nav:s,dots:i,autoplay:h,swipes:l};return function(){function i(t,e){var s=a({},e);!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.block=document.querySelector(t),this.block&&(this.opts=s,i.applyRestOptions(r,this.opts),this.selectors=i.makeSelectorsFromClassnames(this.opts.classNames),this.slides=this.block.querySelectorAll(this.selectors.slider.item),this.activeSlide=this.opts.activeSlide,this.opts.centered&&(this.activeSlide=Math.ceil(this.slides.length/2),this.opts.items&&(this.activeSlide=Math.floor(this.activeSlide/this.opts.items))),this.components=[],this.addMethodsFromPrototypes().boundEventHandlers(),this.resizeHandler=this.resizeHandler.bind(this),this.opts.responsive&&this.setResponsive(i.windowWidth),this.opts.callbacks.beforeInit(),this.opts.init&&this.init())}var t,e,s;return t=i,s=[{key:"deepCloneObject",value:function(e){var s={};return Object.keys(e).forEach(function(t){null!==e[t]&&"object"===o(e[t])?s[t]=i.deepCloneObject(e[t]):s[t]=e[t]}),s}},{key:"applyRestOptions",value:function(e,s){"object"===o(e)&&Object.keys(e).forEach(function(t){void 0===s[t]&&(s[t]=e[t]),"object"===o(e)&&i.applyRestOptions(e[t],s[t])})}},{key:"findClosestNum",value:function(t,s){return t.reduce(function(t,e){return t<s&&t<s?e:t})}},{key:"makeSelectorsFromClassnames",value:function(t){var e=JSON.parse(JSON.stringify(t));return function e(s){Object.keys(s).forEach(function(t){if("object"===o(s[t]))return e(s[t]);"string"==typeof s[t]&&(s[t]=".".concat(s[t]))})}(e),e}},{key:"windowWidth",get:function(){return window.innerWidth}}],(e=[{key:"length",value:function(){return this.slidesLength}},{key:"realLength",value:function(){return this.slides.length-1}},{key:"elements",value:function(){return{slides:this.slides,nav:this.nav,dots:this.dots}}},{key:"current",value:function(){return this.activeSlide}},{key:"appendSlide",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.realLength(),s=document.createElement("div");return s.classList.add(this.opts.classNames.slider.item),s.appendChild(t.cloneNode(!0)),e===this.realLength()?this.wrapper.appendChild(s):this.wrapper.insertBefore(s,this.slides[e+1]),this.slides=this.wrapper.querySelectorAll(this.selectors.slider.item),this.destroyDots().initDots(),this.set().updateControls(),s}},{key:"prependSlide",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.realLength(),s=document.createElement("div");return s.classList.add(this.opts.classNames.slider.item),s.appendChild(t.cloneNode(!0)),this.wrapper.insertBefore(s,this.slides[e]),this.slides=this.wrapper.querySelectorAll(this.selectors.slider.item),this.destroyDots().initDots(),this.set().updateControls(),s}},{key:"removeSlide",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.realLength(),e=this.slidesLength,s=this.slides[t];return s.remove(),this.slides=this.wrapper.querySelectorAll(this.selectors.slider.item),this.destroyDots().initDots(),e!==this.slidesLength&&this.activeSlide===e?("number"==typeof this.opts.margins&&this.setMargins(),this.setSlidesWidth().moveTo(this.activeSlide-1)):this.updateControls(),s}},{key:"setSlidesHeight",value:function(){var s=this;if(this.opts.items-1){var t,i=[];this.slides.forEach(function(t,e){0===s.activeSlide&&e<=s.opts.items-1&&i.push(t.clientHeight),e>=(s.activeSlide+1)*s.opts.items-s.opts.items&&e<(s.activeSlide+1)*s.opts.items&&i.push(t.clientHeight)}),t=Math.max.apply(null,i),this.block.style.height="".concat(t,"px")}else this.block.style.height="".concat(this.slides[this.activeSlide].clientHeight,"px");return this}},{key:"isComponentInit",value:function(t){return-1!==this.components.indexOf(t)}},{key:"componentPush",value:function(t){return this.components.push(t),this}},{key:"componentPop",value:function(t){var e=this.components.indexOf(t);return this.components.splice(e,1),this}},{key:"addMethodsFromPrototypes",value:function(){return Object.keys(p).forEach(function(e){Object.keys(p[e]).forEach(function(t){i.prototype[t]||(i.prototype[t]=p[e][t])})}),this}},{key:"boundEventHandlers",value:function(){var e=this;return Object.keys(i.prototype).filter(function(t){return t.toLowerCase().match("handler")}).forEach(function(t){e[t]=e[t].bind(e)}),this}},{key:"init",value:function(){return window.addEventListener("resize",this.resizeHandler),this.defaultOpts=i.deepCloneObject(this.opts),this.initWrapper().set().initModules().updateControls(),this.opts.callbacks.afterInit(),this}},{key:"set",value:function(){return"number"==typeof this.opts.margins&&this.setMargins(),this.setSlidesWidth().moveTo(this.activeSlide,!1),this}},{key:"destroy",value:function(){this.destroyModules().destroyWrapper(),window.removeEventListener("resize",this.resizeHandler),this.slides.forEach(function(t){t.removeAttribute("style")})}},{key:"initModules",value:function(){return this.opts.dots&&this.initDots(),this.opts.nav&&this.initNav(),this.opts.autoplay&&this.initAutoplay(),this.opts.swipes&&this.initSwipes(),this}},{key:"updateControls",value:function(){return this.isComponentInit("dots")&&this.updateDots(),this.isComponentInit("nav")&&this.updateNav(),this}},{key:"destroyModules",value:function(){return this.isComponentInit("dots")&&this.destroyDots(),this.isComponentInit("nav")&&this.destroyNav(),this.isComponentInit("autoplay")&&this.destroyAutoplay(),this.isComponentInit("swipes")&&this.destroySwipes(),this}},{key:"setMargins",value:function(){var e=this;return this.slides.forEach(function(t){t.style.marginLeft="".concat(e.opts.margins,"px")}),this.wrapper.style.marginLeft="-".concat(this.opts.margins/2,"px"),this}},{key:"setResponsive",value:function(t){var e=this,s=this.breakpoint;return t<s&&Object.keys(this.opts.responsive[s]).forEach(function(t){e.opts[t]=e.opts.responsive[s][t]}),this}},{key:"applyResponsive",value:function(){return this.opts.destroy?this.destroy():(this.components||(console.log("reinit"),this.init()),this.destroyModules().initModules().updateControls().set()),this}},{key:"setDefault",value:function(){var e=this;return Object.keys(this.defaultOpts).forEach(function(t){"responsive"!==t&&(e.opts[t]=e.defaultOpts[t])}),this}},{key:"resizeHandler",value:function(){var t=i.windowWidth,e=this.viewport,s=this.breakpoint;this.setSlidesWidth().moveTo(this.activeSlide,!1),this.opts.responsive&&t<s?(this.setDefault().setResponsive(t).applyResponsive(),this.opts.callbacks.onResize(t,e,s)):this.opts.callbacks.onResize(t,e,!1)}},{key:"initWrapper",value:function(){var e=this;return this.wrapper=document.createElement("div"),this.wrapper.classList.add(this.opts.classNames.slider.wrapper),this.slides.forEach(function(t){e.wrapper.appendChild(t)}),this.slides=this.wrapper.querySelectorAll(this.selectors.slider.item),this.block.appendChild(this.wrapper),this}},{key:"destroyWrapper",value:function(){var e=this;return this.slides.forEach(function(t){e.block.appendChild(t)}),this.wrapper.remove(),this}},{key:"loop",value:function(t){-1===t?this.activeSlide=this.slidesLength:t===this.slidesLength+1?this.activeSlide=0:this.activeSlide=t}},{key:"setSlidesWidth",value:function(){var e=this.viewport;return this.opts.items&&(e/=this.opts.items),this.opts.margins&&(e-=this.opts.margins),this.slides.forEach(function(t){t.style.width="".concat(e,"px")}),this}},{key:"setTranslate",value:function(){return this.wrapper.style.transform="translateX(-".concat((this.slideWidth+this.opts.margins)*this.activeSlide*this.opts.items,"px)"),this}},{key:"setSlidesClassNames",value:function(t,e){var s=this;if(this.slides.forEach(function(t){t.classList.remove(s.opts.classNames.slider.prev)}),this.opts.loop){if(-1===e)return this.slides[t]&&(this.slides[t].classList.remove(this.opts.classNames.slider.active),this.slides[t].classList.add(this.opts.classNames.slider.prev)),void this.slides[this.slidesLength*this.opts.items].classList.add(this.opts.classNames.slider.active);if(e===this.slidesLength+1)return this.slides[this.slidesLength*this.opts.items]&&(this.slides[this.slidesLength*this.opts.items].classList.remove(this.opts.classNames.slider.active),this.slides[this.slidesLength*this.opts.items].classList.add(this.opts.classNames.slider.prev)),void this.slides[0].classList.add(this.opts.classNames.slider.active)}return this.slides[e*this.opts.items].classList.add(this.opts.classNames.slider.active),t!==e&&this.slides[t*this.opts.items]&&(this.slides[t*this.opts.items].classList.add(this.opts.classNames.slider.prev),this.slides[t*this.opts.items].classList.remove(this.opts.classNames.slider.active)),this}},{key:"moveTo",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],s=this.opts.transition,i=s.type,o=s.duration,n=s.delay;(t>this.slidesLength||t<0)&&!this.opts.loop||(this.opts.callbacks.beforeMove(this.activeSlide,t),this.setSlidesClassNames(this.activeSlide,t),this.opts.loop?this.loop(t):this.activeSlide=t,this.wrapper.style.transition=e?"transform ".concat(o,"ms ").concat(i," ").concat(n,"ms"):"",this.setTranslate().updateControls(),this.opts.autoplay&&this.activeSlide===this.slidesLength&&(clearInterval(this.autoplay.interval),this.autoplay.stop||this.initAutoplay()),this.opts.adaptiveHeight&&this.setSlidesHeight(),this.opts.callbacks.afterMove(this.activeSlide))}},{key:"viewport",get:function(){return this.wrapper.clientWidth}},{key:"slideWidth",get:function(){return this.slides[0].clientWidth}},{key:"breakpoint",get:function(){return!!this.opts.responsive&&i.findClosestNum(Object.keys(this.opts.responsive),i.windowWidth)}},{key:"slidesLength",get:function(){return this.opts.items?Math.ceil(this.slides.length/this.opts.items)-1:this.slides.length-1}}])&&n(t.prototype,e),s&&n(t,s),i}()});
//# sourceMappingURL=slippery.min.js.map
